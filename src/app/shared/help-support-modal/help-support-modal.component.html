<div *ngIf="isOpen" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 md:p-4"
  (click)="onClose()">
  <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden"
    (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="flex items-center justify-between p-4 md:p-6 border-b border-gray-200">
      <div class="flex items-center gap-3">
        <lucide-angular [img]="helpIcon" class="w-6 h-6 text-royal"></lucide-angular>
        <h2 class="text-lg md:text-xl font-semibold text-gray-900">Help & Support</h2>
      </div>
      <button (click)="onClose()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
        aria-label="Close help modal">
        <lucide-angular [img]="closeIcon" class="w-5 h-5 text-gray-500"></lucide-angular>
      </button>
    </div>

    <!-- Content -->
    <div class="p-4 md:p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
      <!-- Getting Started Section -->
      <div class="mb-6">
        <div class="flex items-center gap-2 mb-3">
          <lucide-angular [img]="bookIcon" class="w-5 h-5 text-royal"></lucide-angular>
          <h3 class="text-base md:text-lg font-medium text-gray-900">Getting Started</h3>
        </div>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <p class="text-sm text-blue-800 mb-2">
            Welcome to LegalAdviceChatBot! Here's how to get started:
          </p>
          <ul class="text-sm text-blue-700 space-y-1 ml-4">
            <li>• Start a new conversation by clicking "New Chat"</li>
            <li>• Ask questions about legal topics in plain English</li>
            <li>• Use the sidebar to manage your conversations</li>
            <li>• Access settings through your profile menu</li>
          </ul>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="mb-6">
        <div class="flex items-center gap-2 mb-3">
          <lucide-angular [img]="helpIcon" class="w-5 h-5 text-royal"></lucide-angular>
          <h3 class="text-base md:text-lg font-medium text-gray-900">Frequently Asked Questions</h3>
        </div>
        <div class="space-y-2">
          <div *ngFor="let faq of faqs; let i = index"
            class="border border-gray-200 rounded-lg">
            <button (click)="toggleFaq(i)"
              class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors">
              <span class="text-sm font-medium text-gray-900">{{ faq.question }}</span>
              <svg class="w-5 h-5 text-gray-500 transform transition-transform"
                [class.rotate-180]="activeFaqIndex === i" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div *ngIf="activeFaqIndex === i"
              class="px-4 pb-4 text-sm text-gray-600">
              {{ faq.answer }}
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Support Section -->
      <div class="mb-6">
        <div class="flex items-center gap-2 mb-3">
          <lucide-angular [img]="messageIcon" class="w-5 h-5 text-royal"></lucide-angular>
          <h3 class="text-base md:text-lg font-medium text-gray-900">Contact Support</h3>
        </div>
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
          <p class="text-sm text-gray-700 mb-3">
            Need additional help? Our support team is here to assist you.
          </p>
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <span class="text-sm font-medium text-gray-700">Email:</span>
              <a href="mailto:support&#64;legaladvicechatbot.com"
                class="text-sm text-royal hover:underline">support&#64;nsembot.com</a>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-sm font-medium text-gray-700">Response time:</span>
              <span class="text-sm text-gray-600">Within 24 hours</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Report an Issue Section -->
      <div>
        <div class="flex items-center gap-2 mb-3">
          <lucide-angular [img]="alertIcon" class="w-5 h-5 text-royal"></lucide-angular>
          <h3 class="text-base md:text-lg font-medium text-gray-900">Report an Issue</h3>
        </div>
        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
          <p class="text-sm text-red-800 mb-3">
            Found a bug or experiencing technical issues? Please report it so we can fix it.
          </p>
          <button class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors">
            Report Issue
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="flex justify-end p-4 md:p-6 border-t border-gray-200 bg-gray-50">
      <button (click)="onClose()"
        class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
        Close
      </button>
    </div>
  </div>
</div>
